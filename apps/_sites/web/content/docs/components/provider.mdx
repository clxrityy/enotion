import { Provider, Button } from "@enotion/components";
import { useState } from "react";

# Provider

- [Import](#import)
- [Features](#features)
- [Props](#props)
- [Basic Usage](#basic-usage)
- [Examples](#examples)
  - [With Theme Management](#with-theme-management)
  - [With Notification Options](#with-notification-options)
- [Behavior](#behavior)
- [Palette Injection](#palette-injection)
- [Use Cases](#use-cases)
- [Theme Options](#theme-options)
- [CSS Import](#css-import)
- [See Also](#see-also)

A combined context provider for theme, color palette, and notifications.

---

## Import

```tsx
import { Provider } from "@enotion/components";
```

## Features

- Unified provider for ThemeProvider, ColorPaletteProvider, and NotificationProvider
- Automatic palette injection into child components
- Supports system, light, and dark themes
- Notification system integration
- Smart component detection (only injects palette into custom components)
- Recursive children processing

## Props

The Provider component accepts the following props:

- **children** (ReactNode, required): Child components to provide context to
- **palette** (ColorPaletteType, optional): Color palette to apply
- **theme** (Theme, optional): Theme mode (system, light, or dark)
- **notificationOptions** (object, optional): Options for NotificationProvider
- All standard HTML element attributes

## Basic Usage

```tsx
import { Provider } from "@enotion/components";

function App() {
  return (
    <Provider palette="solarized" theme="dark">
      <YourApp />
    </Provider>
  );
}
```

export const BasicProviderExample = () => {
  return (
    <Provider palette="dark" theme="dark">
      <div className="p-6 border rounded">
        <h3 className="text-lg font-bold mb-2">Provided Content</h3>
        <p className="mb-4">This content is wrapped in a Provider with dark palette.</p>
        <Button variant="primary">Themed Button</Button>
      </div>
    </Provider>
  );
};

<BasicProviderExample />

## Examples

### With Theme Management

```tsx
import { Provider } from "@enotion/components";
import { useState } from "react";

function App() {
  const [theme, setTheme] = useState("system");

  return (
    <Provider theme={theme}>
      <button onClick={() => setTheme(theme === "dark" ? "light" : "dark")}>
        Toggle Theme
      </button>
      <YourApp />
    </Provider>
  );
}
```

## With Notification Options

```tsx
import { Provider } from "@enotion/components";

function App() {
  return (
    <Provider
      palette="monochrome"
      notificationOptions={{
        position: "top-right",
        duration: 3000,
      }}
    >
      <YourApp />
    </Provider>
  );
}
```

## Behavior

The Provider component performs several key functions:

1. **Theme Management**: Wraps children in ThemeProvider for theme context
2. **Palette Management**: Wraps children in ColorPaletteProvider for palette context
3. **Notification System**: Wraps children in NotificationProvider for notifications
4. **Automatic Injection**: Automatically injects palette prop into custom components that don't already have one
5. **Recursive Processing**: Processes nested children to ensure all components receive palette

## Palette Injection

The Provider intelligently injects the palette prop:

- Only injects into custom components (not native DOM elements like div, span)
- Skips components that already have a palette prop
- Recursively processes all nested children
- Preserves all existing props on components

## Use Cases

- Application root wrapper
- Themed sections
- Multi-tenant applications with different palettes
- Dynamic theme switching
- Notification-enabled applications

## Theme Options

The theme prop supports three values:

- **system**: Follows system preference
- **light**: Forces light theme
- **dark**: Forces dark theme

When no palette is specified, the Provider uses a default palette based on the theme:

- dark theme → "dark" palette
- light/system theme → "default" palette

## CSS Import

The Provider automatically imports notification styles. Ensure your build system supports CSS imports from node_modules.

## See Also

- [LayoutProvider](/packages/components/layout-provider) - Provider with layout context
- [useColorPalette](/packages/hooks/use-color-palette) - Hook for palette context
- [useTheme](/packages/hooks/use-theme) - Hook for theme context
- [colors](/packages/core/colors) - Color palette system
